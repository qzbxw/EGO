#!/usr/bin/env sh

# üß† EGO Commit Message Hook
commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Check if commit message is empty
if [ -z "$commit_msg" ]; then
  echo ""
  echo "‚ùå Commit message cannot be empty!"
  echo ""
  exit 1
fi

# Check minimum length (at least 10 characters)
msg_length=${#commit_msg}
if [ $msg_length -lt 10 ]; then
  echo ""
  echo "‚ùå Commit message too short (minimum 10 characters)"
  echo "   Current length: $msg_length"
  echo ""
  exit 1
fi

# Optional: Check for conventional commits (warning only)
if ! echo "$commit_msg" | grep -qE "^(feat|fix|docs|style|refactor|perf|test|chore|build|ci|revert)(\(.+\))?:|^Merge|^Initial commit"; then
  echo ""
  echo "‚ö†Ô∏è  Tip: Consider using conventional commits:"
  echo "   feat: new feature"
  echo "   fix: bug fix"
  echo "   docs: documentation"
  echo "   style: formatting"
  echo "   refactor: code refactoring"
  echo "   test: adding tests"
  echo "   chore: maintenance"
  echo ""
fi

echo "‚úÖ Commit message looks good!"
