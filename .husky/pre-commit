#!/usr/bin/env sh

# ğŸ§  EGO Pre-Commit Hook
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸ§  EGO Pre-Commit Check              â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Function to print status
print_status() {
  if [ $1 -eq 0 ]; then
    echo "âœ… $2"
  else
    echo "âŒ $2 FAILED"
    exit 1
  fi
}

# Get staged files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)

# Check if there are staged files
if [ -z "$STAGED_FILES" ]; then
  echo "âš ï¸  No staged files to check"
  exit 0
fi

echo "ğŸ” Checking staged files..."
echo ""

# Run full check
echo "âœ… Running full project checks..."
make check
print_status $? "Check"

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸš€ All checks passed! Ready to go!   â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
